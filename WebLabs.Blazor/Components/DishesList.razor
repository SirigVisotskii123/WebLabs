@using WebLabs.Blazor.Data

<h3>DishesList</h3>
@if (Dishes == null)
{
	<p>Загрузка ...</p>
}
else
{
	<div class="list-group">
		@{
			var i = 1;
			foreach (var dish in Dishes)
			{
				<button type="button" class="list-group-item list-group-item-action"
						@onclick="@(e => Selected(e, dish.DishId))">
					@(SelectedId == dish.DishId ? "active" : "")
					@(i++) - @dish.DishName

				</button>
			}
		}
	</div>
}

@code {
	[Parameter]
	public IEnumerable<ListViewModel>? Dishes { get; set; }
	[Parameter]
	public EventCallback<IEnumerable<ListViewModel>> DishesChanged
	{
		get; set;
	}

	public int SelectedId = 0;

	[Parameter]
	public EventCallback<int> SelectedObjectChanged { get; set; }

	private async Task Selected(MouseEventArgs e, int id)
	{
		SelectedId = id;
		SelectedObjectChanged.InvokeAsync(id);
	}
}